(function(e,t,n,r){"use strict";function s(e){var t=/fade/i.test(e),n=/pop/i.test(e);return{animate:t||n,pop:n,fade:t}}var i=[];Foundation.libs.reveal={name:"reveal",version:"5.5.3",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:e.noop,bg:e(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(t,n,r){e.extend(!0,this.settings,n,r),this.bindings(n,r)},events:function(e){var t=this,r=t.S;return r(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(e){e.preventDefault();if(!t.locked){var n=r(this),i=n.data(t.data_attr("reveal-ajax")),s=n.data(t.data_attr("reveal-replace-content"));t.locked=!0;if(typeof i=="undefined")t.open.call(t,n);else{var o=i===!0?n.attr("href"):i;t.open.call(t,n,{url:o},{replaceContentSel:s})}}}),r(n).on("click.fndtn.reveal",this.close_targets(),function(e){e.preventDefault();if(!t.locked){var n=r("["+t.attr_name()+"].open").data(t.attr_name(!0)+"-init")||t.settings,i=r(e.target)[0]===r("."+n.bg_class)[0];if(i){if(!n.close_on_background_click)return;e.stopPropagation()}t.locked=!0,t.close.call(t,i?r("["+t.attr_name()+"].open:not(.toback)"):r(this).closest("["+t.attr_name()+"]"))}}),r("["+t.attr_name()+"]",this.scope).length>0?r(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):r(this.scope).on("open.fndtn.reveal","["+t.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+t.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+t.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+t.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+t.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+t.attr_name()+"]",this.close_video),!0},key_up_on:function(e){var t=this;return t.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(e){var n=t.S("["+t.attr_name()+"].open"),r=n.data(t.attr_name(!0)+"-init")||t.settings;r&&e.which===27&&r.close_on_esc&&!t.locked&&t.close.call(t,n)}),!0},key_up_off:function(e){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(n,s){var o=this,u;n?typeof n.selector!="undefined"?u=o.S("#"+n.data(o.data_attr("reveal-id"))).first():(u=o.S(this.scope),s=n):u=o.S(this.scope);var a=u.data(o.attr_name(!0)+"-init");a=a||this.settings;if(u.hasClass("open")&&n!==r&&n.attr("data-reveal-id")==u.attr("id"))return o.close(u);if(!u.hasClass("open")){var f=o.S("["+o.attr_name()+"].open");typeof u.data("css-top")=="undefined"&&u.data("css-top",parseInt(u.css("top"),10)).data("offset",this.cache_offset(u)),u.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(u),u.on("open.fndtn.reveal",function(e){if(e.namespace!=="fndtn.reveal")return}),u.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),f.length<1&&this.toggle_bg(u,!0),typeof s=="string"&&(s={url:s});var l=function(){f.length>0&&(a.multiple_opened?o.to_back(f):o.hide(f,a.css.close)),a.multiple_opened&&i.push(u),o.show(u,a.css.open)};if(typeof s=="undefined"||!s.url)l();else{var c=typeof s.success!="undefined"?s.success:null;e.extend(s,{success:function(t,n,r){if(e.isFunction(c)){var i=c(t,n,r);typeof i=="string"&&(t=i)}typeof options!="undefined"&&typeof options.replaceContentSel!="undefined"?u.find(options.replaceContentSel).html(t):u.html(t),o.S(u).foundation("section","reflow"),o.S(u).children().foundation(),l()}}),a.on_ajax_error!==e.noop&&e.extend(s,{error:a.on_ajax_error}),e.ajax(s)}}o.S(t).trigger("resize")},close:function(t){var t=t&&t.length?t:this.S(this.scope),n=this.S("["+this.attr_name()+"].open"),r=t.data(this.attr_name(!0)+"-init")||this.settings,s=this;if(n.length>0){t.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(t),t.trigger("close.fndtn.reveal");if(r.multiple_opened&&n.length===1||!r.multiple_opened||t.length>1)s.toggle_bg(t,!1),s.to_front(t);if(r.multiple_opened){var o=t.is(":not(.toback)");s.hide(t,r.css.close,r),o?i.pop():i=e.grep(i,function(e){var n=e[0]===t[0];return n&&s.to_front(t),!n}),i.length>0&&s.to_front(i[i.length-1])}else s.hide(n,r.css.close,r)}},close_targets:function(){var e="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?e+", ."+this.settings.bg_class:e},toggle_bg:function(t,n){this.S("."+this.settings.bg_class).length===0&&(this.settings.bg=e("<div />",{"class":this.settings.bg_class}).appendTo("body").hide());var i=this.settings.bg.filter(":visible").length>0;n!=i&&((n==r?i:!n)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(n,r){if(r){var i=n.data(this.attr_name(!0)+"-init")||this.settings,o=i.root_element,u=this;if(n.parent(o).length===0){var a=n.wrap('<div style="display: none;" />').parent();n.on("closed.fndtn.reveal.wrapped",function(){n.detach().appendTo(a),n.unwrap().unbind("closed.fndtn.reveal.wrapped")}),n.detach().appendTo(o)}var f=s(i.animation);f.animate||(this.locked=!1);if(f.pop){r.top=e(t).scrollTop()-n.data("offset")+"px";var l={top:e(t).scrollTop()+n.data("css-top")+"px",opacity:1};return setTimeout(function(){return n.css(r).animate(l,i.animation_speed,"linear",function(){u.locked=!1,n.trigger("opened.fndtn.reveal")}).addClass("open")},i.animation_speed/2)}r.top=e(t).scrollTop()+n.data("css-top")+"px";if(f.fade){var l={opacity:1};return setTimeout(function(){return n.css(r).animate(l,i.animation_speed,"linear",function(){u.locked=!1,n.trigger("opened.fndtn.reveal")}).addClass("open")},i.animation_speed/2)}return n.css(r).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var i=this.settings;return s(i.animation).fade?n.fadeIn(i.animation_speed/2):(this.locked=!1,n.show())},to_back:function(e){e.addClass("toback")},to_front:function(e){e.removeClass("toback")},hide:function(n,r){if(r){var i=n.data(this.attr_name(!0)+"-init"),o=this;i=i||this.settings;var u=s(i.animation);u.animate||(this.locked=!1);if(u.pop){var a={top:-e(t).scrollTop()-n.data("offset")+"px",opacity:0};return setTimeout(function(){return n.animate(a,i.animation_speed,"linear",function(){o.locked=!1,n.css(r).trigger("closed.fndtn.reveal")}).removeClass("open")},i.animation_speed/2)}if(u.fade){var a={opacity:0};return setTimeout(function(){return n.animate(a,i.animation_speed,"linear",function(){o.locked=!1,n.css(r).trigger("closed.fndtn.reveal")}).removeClass("open")},i.animation_speed/2)}return n.hide().css(r).removeClass("open").trigger("closed.fndtn.reveal")}var i=this.settings;return s(i.animation).fade?n.fadeOut(i.animation_speed/2):n.hide()},close_video:function(t){var n=e(".flex-video",t.target),r=e("iframe",n);r.length>0&&(r.attr("data-src",r[0].src),r.attr("src",r.attr("src")),n.hide())},open_video:function(t){var n=e(".flex-video",t.target),i=n.find("iframe");if(i.length>0){var s=i.attr("data-src");if(typeof s=="string")i[0].src=i.attr("data-src");else{var o=i[0].src;i[0].src=r,i[0].src=o}n.show()}},data_attr:function(e){return this.namespace.length>0?this.namespace+"-"+e:e},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10)+e.scrollY;return e.hide(),t},off:function(){e(this.scope).off(".fndtn.reveal")},reflow:function(){}}})(jQuery,window,window.document);